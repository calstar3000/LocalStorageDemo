<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>LocalStorage Demo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton-framework/1.1.1/skeleton.min.css" />
    <style>

    </style>
  </head>
  <body>

    <div class="container">
        <h1>LocalStorage Demo</h1>

        <!-- columns should be the immediate child of a .row -->
        <div class="row">
          <div class="six columns">
            <h4>Personal Details</h4>
            <form>
                <fieldset>
                    <div class="form-input">
                        <label for="fullName">Full Name:</label>
                        <input type="text" name="full-name" id="fullName" />
                    </div>
                    <div>
                        <label for="age">Age:</label>
                        <input type="number" name="age" id="age" />
                    </div>
                    <div>
                        <label for="dob">Date of Birth:</label>
                        <input type="date" name="dob" id="dob" />
                    </div>
                    <div>
                        <legend>Gender:</legend>
                        <label class="gender">
                            <input type="radio" name="gender" id="genderMale" value="male" />
                            <span class="label-body">Male</span>
                        </label>
                        <label class="gender">
                            <input type="radio" name="gender" id="genderFemale" value="female" />
                            <span class="label-body">Female</span>
                        </label>
                        <label class="gender">
                            <input type="radio" name="gender" id="genderFluid" value="fluid" />
                            <span class="label-body">Fluid</span>
                        </label>
                    </div>
                    <div>
                        <label for="bio">Bio:</label>
                        <textarea type="textarea" class="u-full-width" placeholder="Tell us about yourselfâ€¦" id="bio"></textarea>
                    </div>
                    <label class="copy">
                        <input type="checkbox" name="copy" id="copy" value="" />
                        <span class="label-body">Send a copy to yourself</span>
                      </label>
                </fieldset>
            </form>
          </div>
          <div class="six columns">
            <h4>Contents of LocalStorage</h4>
            <div id="pnlLocalStorage">
                <table id="tblLocalStorage">
                    <tr>
                        <th>Key</th>
                        <th>Value</th>
                    </tr>
                </table>
            </div>
            <div>
                <button id="btnClear" class="button-primary">Clear LocalStorage</button>
            </div>
          </div>
        </div>

    </div>

    <script
        src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous">
    </script>

    <script type="text/javascript">
    
        $(document).ready(function() {
            updateLocalStorageDisplay();
            handleInputChange();
            handleClear();
        });

        function handleInputChange() {
            $('input, textarea').change(function() {
                var key = $(this).attr('id') + '|' + $(this).attr('type');
                var val = $(this).val();

                localStorage.setItem(key, val);
                updateLocalStorageDisplay();
            });
        }

        function handleClear() {
            $("#btnClear").click(function() {
                localStorage.clear();
                updateLocalStorageDisplay();
                $('input, textarea').each(function() {
                    $(this).val('').prop('checked', false);
                });
            });
        }

        function updateLocalStorageDisplay() {
            $('#tblLocalStorage').find('.added').remove();

            for (var i = localStorage.length - 1; i >= 0; i--) {
                var key = localStorage.key(i);
                var val = localStorage.getItem(key);

                populateTableRow(key, val);
                populateFormInput(key, val);
            }
        }

        function populateTableRow(key, val) {
            var tableRow = '<tr class="added"><td>' + key + '</td><td>' + val + '</td></tr>';
            $('#tblLocalStorage').append(tableRow);
        }

        function populateFormInput(key, val) {
            var keyParts = key.split('|');
            var inputId = keyParts[0];
            var inputType = keyParts[1];
            var $input = $('#' + inputId);

            if (inputType === 'text' || inputType === 'textarea' || inputType === 'number' || inputType === 'date') {
                $input.val(val);
            } else if (inputType === 'checkbox' || inputType === 'radio') {
                $input.prop('checked', true);
            } else {
                // Don't know how to handle...
            }
        }

    </script>

  </body>
</html>